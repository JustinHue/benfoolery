!function(){"use strict";!function t(){if("loading"===document.readyState)return document.addEventListener("DOMContentLoaded",t);for(var e=document.querySelectorAll("[data-webcomic-search]"),n=0;n<e.length;n++)a(e[n],Number(document.querySelector('[name="'+e[n].getAttribute("data-input")+'"]').value));function a(t,e){var n=document.querySelector('[name="'+t.getAttribute("data-input")+'"]'),r=new FormData,i=new XMLHttpRequest;n.value=e,n.value!==e&&n.dispatchEvent(new Event("change",{bubbles:!0})),r.append("action","webcomic_update_comic_search"),r.append("post",e),r.append("size",t.getAttribute("data-size")),i.onreadystatechange=function(){var n,r;if(4===i.readyState)return e?(n=t,r=JSON.parse(i.responseText),n.innerHTML='\n\t\t\t<p>\n\t\t\t\t<a class="dashicons dashicons-no">\n\t\t\t\t\t<span class="screen-reader-text">'+webcomicSearchL10n.remove+"</span>\n\t\t\t\t</a>\n\t\t\t\t<strong>"+r.title+"</strong>\n\t\t\t</p>\n\t\t\t"+r.media,void n.querySelector("a").addEventListener("click",function(){a(n,0)})):(function(t){t.querySelector("input")||(t.innerHTML='<input type="search" id="'+t.getAttribute("data-webcomic-search")+'" class="widefat" placeholder="'+webcomicSearchL10n.search+'">');t.querySelector("div")||(t.innerHTML+="<div></div>");t.querySelector("input").addEventListener("input",function(e){var n,r,i,c;n=t,r=e.target.value,i=new FormData,c=new XMLHttpRequest,i.append("action","webcomic_update_comic_search"),i.append("query",r),c.onreadystatechange=function(){4===c.readyState&&function(t,e,n){for(var r='<table class="widefat fixed striped media">',i=0;i<n.length;i++)r+='\n\t\t\t<tr data-id="'+n[i].ID+'">\n\t\t\t\t<td class="title column-title column-primary">\n\t\t\t\t\t<strong class="has-media-icon">\n\t\t\t\t\t\t<span class="media-icon image-icon">'+n[i].webcomic_media+"</span>\n\t\t\t\t\t\t"+n[i].post_title+"\n\t\t\t\t\t</strong>\n\t\t\t\t\t<p>"+n[i].status_label+"</p>\n\t\t\t\t</td>\n\t\t\t</tr>";if(e&&!n.length&&(r+="<tr><td>"+webcomicSearchL10n.null+"</td></tr>"),r+="</table>",t.querySelector("div").innerHTML=r.replace('<table class="widefat fixed striped media"></table>',"<small>"+webcomicSearchL10n.info+"</small>"),n)for(var c=t.querySelectorAll("[data-id]"),d=function(e){c[e].addEventListener("click",function(){a(t,Number(c[e].getAttribute("data-id")))})},o=0;o<c.length;o++)d(o)}(n,r,JSON.parse(c.responseText))},c.open("POST",ajaxurl),c.send(i)})}(t),void t.querySelector("input").dispatchEvent(new Event("input")))},i.open("POST",ajaxurl),i.send(r)}jQuery(document).on("widget-added widget-updated",function(t,e){if(e[0].id.match(/_mgsisk_webcomic_/))for(var n=e[0].querySelectorAll("[data-webcomic-search]"),r=0;r<n.length;r++)a(n[r],Number(document.querySelector('[name="'+n[r].getAttribute("data-input")+'"]').value))})}()}();
